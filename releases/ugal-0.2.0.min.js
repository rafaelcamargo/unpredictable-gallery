/****************************************************
ugal v0.2.0
2015-01-04
Fork me on Github:
https://github.com/rafaelcamargo/unpredictablegallery
*****************************************************/
var ugal=function(){function a(a){b(),c(a),d(),f(),g(),j(),l(),m(),eb.raw.length?K():Q()}function b(){ab=0,bb=[],cb=[],db={},eb={}}function c(a){V=document.getElementById(a.container),W=parseInt(a.width),X=parseInt(a.height),Y=a.hFrames||5,Z=a.vFrames||3,$=a.fSpace||1,_=a.theme||"none"}function d(){eb={raw:e(),sources:[],list:[],calcCenteredMargin:function(a,b,c){var d="top"==c?"clientHeight":"clientWidth";return parseInt(b[d]/-2+a[d]/2)+fb},center:function(a,b){b.style.marginTop=this.calcCenteredMargin(a,b,"top"),b.style.marginLeft=this.calcCenteredMargin(a,b,"left")},getSource:function(a){return a.attributes[0].childNodes[0].nodeValue},setSource:function(a,b){a.setAttribute("src",b)},remove:function(a){a.parentNode.removeChild(a)}}}function e(){return document.querySelectorAll("img",V)}function f(){for(var a=0;a<eb.raw.length;a++)eb.sources.push(eb.getSource(eb.raw[a])),eb.remove(eb.raw[a])}function g(){h(),i()}function h(){for(var a=document.querySelectorAll("div > div",V),b=0;b<a.length;b++)V.removeChild(a[b])}function i(){V.style.position="relative",V.style.width=W+fb,V.style.height=X+fb,V.style.backgroundColor=gb[_].colors[0]}function j(){db.minWidth=k(W,Y),db.minHeight=k(X,Z)}function k(a,b){return parseInt(a/b)-$}function l(){for(var a=0;Z>a;a++){for(var b=[],c=db.minHeight*a+a*$+$,d=0;Y>d;d++){var e=db.minWidth*d+d*$+$;b.push({x:e,y:c,available:!0})}bb.push(b)}}function m(){for(var a;ab<n();)a=q(o()),a.style.top&&a.style.left&&(J(a),I(a))}function n(){return db.minWidth*Y*db.minHeight*Z}function o(){return{hSize:p(),vSize:p(),getDimension:function(a,b){var c=db.minWidth;return"vertical"==b&&(c=db.minHeight),parseInt(a*c)+this.setFrameSpaceIncrement(a)},getHeight:function(){return this.getDimension(this.vSize,"vertical")},getUsedArea:function(){return this.hSize*db.minWidth*this.vSize*db.minHeight},getWidth:function(){return this.getDimension(this.hSize,"horizontal")},setFrameSpaceIncrement:function(a){return a*$-1}}}function p(){return parseInt(10*Math.random())%2===0?2:1}function q(a){var b=document.createElement("div");return r(b,a),s(b,a),u(b),b}function r(a,b){a.style.width=b.getWidth()+fb,a.style.height=b.getHeight()+fb}function s(a,b){a.style.position="absolute";var c=v(b);c?t(a,c):m()}function t(a,b){a.style.top=b.y+fb,a.style.left=b.x+fb}function u(a){a.style.backgroundColor=gb[_].colors[1],a.style.overflow="hidden"}function v(a){for(var b=0;b<bb.length;b++)for(var c=0;c<bb[b].length;c++)if(w(b,c,a))return F(a,b,c)}function w(a,b,c){return x(a,b,c)&&!B(a,b,c)}function x(a,b,c){return y(a,b)&&z(a,b,c)}function y(a,b){return bb[a][b].available}function z(a,b,c){var d=!0,e=!0;return c.vSize>1&&!C(a)&&(d=A(bb[a+c.vSize-1][b])),c.hSize>1&&!D(b)&&(e=A(bb[a][b+c.hSize-1])),d&&e}function A(a){return a.available}function B(a,b,c){return C(a)&&D(b)?c.hSize>1||c.vSize>1:C(a)?c.vSize>1:D(b)?c.hSize>1:void 0}function C(a){return a===E(bb)}function D(a){return a===E(bb[0])}function E(a){return a.length-1}function F(a,b,c){return G(a,b,c),H(a),bb[b][c]}function G(a,b,c){for(var d=b;d<b+a.vSize;d++)for(var e=c;e<c+a.hSize;e++)bb[d][e].available=!1}function H(a){ab+=a.getUsedArea()}function I(a){V.appendChild(a)}function J(a){cb.push(a)}function K(){L(),P()}function L(){for(var a,b=0;b<cb.length;b++)a=eb.sources[b]?b:M(a),N(b,a),a++}function M(a){return eb.sources[a]?a:0}function N(a,b){cb[a].appendChild(O(eb.sources[b]))}function O(a){var b=document.createElement("img");return eb.setSource(b,a),eb.list.push(b),b}function P(){for(var a=0;a<cb.length;a++)eb.center(cb[a],eb.list[a])}function Q(){for(var a=0;a<cb.length;a++)R(cb[a]);S()}function R(a){a.style.backgroundColor="#fff",a.style.opacity="0.35"}function S(){var a=T("backgroundImage"),b=U();a?V.style.backgroundImage=a+b:V.style.backgroundColor=THEMES[_].colors[1]}function T(a){for(var b=document.createElement("div"),c=["-o-","-ms-","-moz-","-webkit-"],d=0;d<c.length;d++){if(b.style[a]=c[d]+U(),b.style[a])return c[d];b.style[a]=""}}function U(){return"linear-gradient("+gb.getGradient()+")"}var V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb="px",gb={none:{colors:["#000000","#333333"]},Joinville:{colors:["#660A62","#1C0152"]},Floripa:{colors:["#00AACC","#00954B"]},Blumenau:{colors:["#FFBB1A","#FF0000"]},Lages:{colors:["#7ACC29","#15CC3A"]},getGradient:function(){return"-45deg, "+this[_].colors[0]+" 0%, "+this[_].colors[1]+" 100%"}};return{init:a}}();