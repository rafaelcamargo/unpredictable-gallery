var ugal=function(){function a(a){b(),c(a),d(),f(),g(),h(),j(),k(),I(),M()}function b(){T=0,U=[],V=[],W={},X={}}function c(a){N=document.getElementById(a.container),O=parseInt(a.width),P=parseInt(a.height),Q=a.hFrames||5,R=a.vFrames||3,S=a.fSpace||1}function d(){X={raw:e(),sources:[],list:[],calcCenteredMargin:function(a,b,c){var d="top"==c?"clientHeight":"clientWidth";return parseInt(b[d]/-2+a[d]/2)+Y},center:function(a,b){b.style.marginTop=this.calcCenteredMargin(a,b,"top"),b.style.marginLeft=this.calcCenteredMargin(a,b,"left")},getSource:function(a){return a.attributes[0].childNodes[0].nodeValue},setSource:function(a,b){a.setAttribute("src",b)},remove:function(a){a.parentNode.removeChild(a)}}}function e(){return document.querySelectorAll("img",N)}function f(){for(var a=0;a<X.raw.length;a++)X.sources.push(X.getSource(X.raw[a])),X.remove(X.raw[a])}function g(){N.style.position="relative",N.style.width=O+Y,N.style.height=P+Y,N.style.backgroundColor||(N.style.backgroundColor=Z.CONTAINER_BACKGROUND)}function h(){W.minWidth=i(O,Q),W.minHeight=i(P,R)}function i(a,b){return parseInt(a/b)-S}function j(){for(var a=0;R>a;a++){for(var b=[],c=W.minHeight*a+a*S+S,d=0;Q>d;d++){var e=W.minWidth*d+d*S+S;b.push({x:e,y:c,available:!0})}U.push(b)}}function k(){for(var a;T<l();)a=o(m()),a.style.top&&a.style.left&&(H(a),G(a))}function l(){return W.minWidth*Q*W.minHeight*R}function m(){return{hSize:n(),vSize:n(),getDimension:function(a,b){var c=W.minWidth;return"vertical"==b&&(c=W.minHeight),parseInt(a*c)+this.setFrameSpaceIncrement(a)},getHeight:function(){return this.getDimension(this.vSize,"vertical")},getUsedArea:function(){return this.hSize*W.minWidth*this.vSize*W.minHeight},getWidth:function(){return this.getDimension(this.hSize,"horizontal")},setFrameSpaceIncrement:function(a){return a*S-1}}}function n(){return parseInt(10*Math.random())%2===0?2:1}function o(a){var b=document.createElement("div");return p(b,a),q(b,a),s(b),b}function p(a,b){a.style.width=b.getWidth()+Y,a.style.height=b.getHeight()+Y}function q(a,b){a.style.position="absolute";var c=t(b);c?r(a,c):k()}function r(a,b){a.style.top=b.y+Y,a.style.left=b.x+Y}function s(a){a.style.backgroundColor=Z.FRAME_BACKGROUND,a.style.overflow="hidden"}function t(a){for(var b=0;b<U.length;b++)for(var c=0;c<U[b].length;c++)if(u(b,c,a))return D(a,b,c)}function u(a,b,c){return v(a,b,c)&&!z(a,b,c)}function v(a,b,c){return w(a,b)&&x(a,b,c)}function w(a,b){return U[a][b].available}function x(a,b,c){var d=!0,e=!0;return c.vSize>1&&!A(a)&&(d=y(U[a+c.vSize-1][b])),c.hSize>1&&!B(b)&&(e=y(U[a][b+c.hSize-1])),d&&e}function y(a){return a.available}function z(a,b,c){return A(a)&&B(b)?c.hSize>1||c.vSize>1:A(a)?c.vSize>1:B(b)?c.hSize>1:void 0}function A(a){return a===C(U)}function B(a){return a===C(U[0])}function C(a){return a.length-1}function D(a,b,c){return E(a,b,c),F(a),U[b][c]}function E(a,b,c){for(var d=b;d<b+a.vSize;d++)for(var e=c;e<c+a.hSize;e++)U[d][e].available=!1}function F(a){T+=a.getUsedArea()}function G(a){N.appendChild(a)}function H(a){V.push(a)}function I(){for(var a,b=0;b<V.length;b++)a=X.sources[b]?b:J(a),K(b,a),a++}function J(a){return X.sources[a]?a:0}function K(a,b){V[a].appendChild(L(X.sources[b]))}function L(a){var b=document.createElement("img");return X.setSource(b,a),X.list.push(b),b}function M(){for(var a=0;a<V.length;a++)X.center(V[a],X.list[a])}var N,O,P,Q,R,S,T,U,V,W,X,Y="px",Z={CONTAINER_BACKGROUND:"#000",FRAME_BACKGROUND:"#333"};return{init:a}}();